<script src="/socket.io/socket.io.js"></script>
<script src="javascript/jquery.min.js"></script>
<script src="javascript/bootstrap.min.js"></script>
<script src="javascript/p5.min.js"></script>
<script src="javascript/gravity.js"></script>
<link rel="stylesheet" href="css/bootstrap.min.css">

<script>
 var socket = io.connect();
 var movers = []
 var liquid = new Liquid(0, 400, 1200, 400, 0.1);
 
 function setup() {
   createCanvas(1200, 800);
   background(127);
   liquid.display();
 }

 function createMover(tweet) {
   var mover = new Mover(random(0.5, 3), random(0, 1200), 0);
   movers.push(mover);
   
   if (liquid.contains(mover)) {
     // Calculate drag force
     var dragForce = liquid.calculateDrag(mover);
     // Apply drag force to Mover
     mover.applyForce(dragForce);
   }
   
   // Gravity is scaled by mass here!
   var gravity = createVector(0, 0.1*mover.mass);
   // Apply gravity
   mover.applyForce(gravity);
     
   // Update and display
   mover.update();
   mover.display();
   mover.checkEdges();
 }
 
 socket.on('tweet', function (tweet) {
   console.log(tweet);
   
   var html = '<div class="alert alert-info"><p>' + tweet.author + '<br>' + tweet.body  + '</p></div>';
   $(html).prependTo('#tweet_area').fadeOut(3000);

   createMover(tweet);
 });

</script>


<header class="navbar navbar-light navbar-static-top bd-navbar">
  <div class="container" style="text-align:center">
    <img src="images/main.jpg" width="150" height="100">
  </div>
</header>

<div>
</div>

<div id="tweet_area">
  
</div>
